AWSTemplateFormatVersion: 2010-09-09
Transform: 'AWS::Serverless-2016-10-31'
Outputs:
  CracklingApi:
    Description: Crackling API endpoint
    Value: !Sub >-
      https://${CracklingRestApi}.execute-api.${AWS::Region}.amazonaws.com/${CracklingRestApiStage}
Resources:
  CracklingRestApi:
    Type: 'AWS::ApiGateway::RestApi'
    Properties:
      Name: Crackling
      EndpointConfiguration:
        Types:
          - EDGE
      Description: API endpoint for Crackling
    Metadata:
      'AWS::CloudFormation::Designer':
        id: cec9eb71-520d-4c8e-b49d-6707666e37c7
  CracklingRestApiStage:
    Type: 'AWS::ApiGateway::Stage'
    Properties:
      DeploymentId: !Ref CracklingRestApiDeployment
      Description: Crackling Production API Stage
      MethodSettings:
        - DataTraceEnabled: 'true'
          HttpMethod: GET
          MetricsEnabled: 'true'
          ResourcePath: /
        - DataTraceEnabled: 'true'
          HttpMethod: POST
          MetricsEnabled: 'true'
          ResourcePath: /api-gateway-stack
          ThrottlingBurstLimit: '999'
        - DataTraceEnabled: 'true'
          HttpMethod: GET
          MetricsEnabled: 'true'
          ResourcePath: /api-gateway-stack
          ThrottlingBurstLimit: '555'
      RestApiId: !Ref CracklingRestApi
      StageName: CracklingProductionApi
      Variables:
        Stack: api-gateway-stack
    Metadata:
      'AWS::CloudFormation::Designer':
        id: fa21bebf-4f0a-46de-b488-ed609ec4515c
  CracklingRestApiDeployment:
    Type: 'AWS::ApiGateway::Deployment'
    Properties:
      RestApiId: !Ref CracklingRestApi
    DependsOn:
      - SubmitJobMethod
      - GetTargetsMethod
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 8a5ba4db-dc88-4861-87f4-c2ef066286aa
      id: c70adb5e-ef22-41b5-b176-c4a49c272eb1
  SubmitJobResource:
    Type: 'AWS::ApiGateway::Resource'
    Properties:
      RestApiId: !Ref CracklingRestApi
      ParentId: !GetAtt 
        - CracklingRestApi
        - RootResourceId
      PathPart: submit
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 1237aee6-1763-4764-8e61-cff47a07a281
  SubmitJobMethod:
    Type: 'AWS::ApiGateway::Method'
    Properties:
      AuthorizationType: NONE
      HttpMethod: POST
      Integration:
        IntegrationHttpMethod: POST
        IntegrationResponses:
          - ResponseTemplates:
              application/json: ''
            StatusCode: 200
        Type: AWS_PROXY
        Uri: !Sub >-
          arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${CreateJobFunction.Arn}/invocations
      MethodResponses:
        - ResponseModels:
            application/json: Empty
          ResponseParameters:
            method.response.header.Access-Control-Allow-Origin: true
          StatusCode: 200
      ResourceId: !Ref SubmitJobResource
      RestApiId: !Ref CracklingRestApi
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 20c69c84-7828-4853-8398-b77a31dbe46b
  ResultsResource:
    Type: 'AWS::ApiGateway::Resource'
    Properties:
      ParentId: !GetAtt 
        - CracklingRestApi
        - RootResourceId
      PathPart: results
      RestApiId: !Ref CracklingRestApi
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 9180788b-6adb-40b4-b61a-cc508edc5b79
  ResultsJobResource:
    Type: 'AWS::ApiGateway::Resource'
    Properties:
      ParentId: !Ref ResultsResource
      PathPart: '{jobid}'
      RestApiId: !Ref CracklingRestApi
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 56e501fd-f9d6-44c0-a54b-6eac7891ed90
  ResultsTargetResource:
    Type: 'AWS::ApiGateway::Resource'
    Properties:
      ParentId: !Ref ResultsJobResource
      PathPart: targets
      RestApiId: !Ref CracklingRestApi
    Metadata:
      'AWS::CloudFormation::Designer':
        id: c7a2ad45-bfee-4e6b-a5a5-127f4da82125
  GetTargetsMethod:
    Type: 'AWS::ApiGateway::Method'
    Properties:
      AuthorizationType: NONE
      HttpMethod: GET
      Integration:
        Credentials: !GetAtt 
          - ApiProxyRole
          - Arn
        IntegrationHttpMethod: POST
        IntegrationResponses:
          - ResponseTemplates:
              application/json: |-
                #set($allTargs = $input.path('$.Items'))
                {
                "recordsTotal": $allTargs.size(),
                "data" : [
                #foreach($targ in $allTargs)
                  {
                    "Sequence": "$targ.Sequence.S",
                    "Consensus": "$targ.Consensus.S",
                    "IsslScore": "$targ.IsslScore.S",
                  }#if($foreach.hasNext),#end
                #end
                ]
                }
            ResponseParameters:
              method.response.header.Access-Control-Allow-Origin: '''*'''
            StatusCode: 200
        PassthroughBehavior: WHEN_NO_TEMPLATES
        RequestTemplates:
          application/json: !Sub |-
            {
                "TableName": "${TargetsTable}",
                "KeyConditionExpression": "JobID = :v1",
                "ExpressionAttributeValues": {
                    ":v1": {
                        "S": "$input.params('jobid')"
                    }
                }
            }
        Type: AWS
        Uri: !Sub 'arn:aws:apigateway:${AWS::Region}:dynamodb:action/Query'
      MethodResponses:
        - ResponseModels:
            application/json: Empty
          ResponseParameters:
            method.response.header.Access-Control-Allow-Origin: true
          StatusCode: 200
      ResourceId: !Ref ResultsTargetResource
      RestApiId: !Ref CracklingRestApi
    Metadata:
      'AWS::CloudFormation::Designer':
        id: b21304cf-1263-43b2-be51-06b8451b8758
  ApiProxyPolicy:
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - 'dynamodb:GetItem'
              - 'dynamodb:GetRecords'
              - 'dynamodb:Query'
            Effect: Allow
            Resource: !Sub 'arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:table/*'
        Version: 2012-10-17
      PolicyName: !Sub 'policygen-api_proxy_${AWS::Region}'
      Roles:
        - !Ref ApiProxyRole
    Type: 'AWS::IAM::Policy'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 063f37b4-895f-468a-806c-cf4c038b7881
  ApiProxyRole:
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - apigateway.amazonaws.com
        Version: 2012-10-17
    Type: 'AWS::IAM::Role'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 1ccb6ce5-114b-40aa-86e0-bab2d9469bb7
  CreateJobRole:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: bfb8ab7d-a828-4dae-9daf-c8d3fc91fcd2
  CreateJobFunction:
    Type: 'AWS::Lambda::Function'
    Properties:
      Code: ../modules/createJob/lambda_function.py
      Description: Puts scan parameters into the job table
      Handler: lambda_function.lambda_handler
      MemorySize: 1024
      Role: !GetAtt 
        - CreateJobRole
        - Arn
      Runtime: python3.8
      Timeout: 10
      Environment:
        Variables:
          JOBS_TABLE: !Ref JobsTable
          MAX_SEQ_LENGTH: 20000
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 7e5fdb7c-849e-477b-bd32-203183c47ca5
  CreateJobPermission:
    Type: 'AWS::Lambda::Permission'
    Properties:
      Action: 'lambda:InvokeFunction'
      FunctionName: !Ref CreateJobFunction
      Principal: apigateway.amazonaws.com
      SourceArn: !Sub >-
        arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${CracklingRestApi}/*/POST/submit
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 80b5073f-fd00-42d8-a12d-e61d272405b9
  ApiGatewayLoggingRole:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - apigateway.amazonaws.com
            Action: 'sts:AssumeRole'
      Path: /
      ManagedPolicyArns:
        - !Sub >-
          arn:${AWS::Partition}:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 7264d5d4-f58a-4769-bde3-7796cdfa22e5
  ApiGatewayLoggingAccount:
    Type: 'AWS::ApiGateway::Account'
    Properties:
      CloudWatchRoleArn: !GetAtt 
        - ApiGatewayLoggingRole
        - Arn
    Metadata:
      'AWS::CloudFormation::Designer':
        id: c32a628e-a0c5-4464-936c-e55983f5dfea
  JobsTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      AttributeDefinitions:
        - AttributeName: JobID
          AttributeType: S
      KeySchema:
        - AttributeName: JobID
          KeyType: HASH
      BillingMode: PAY_PER_REQUEST
      StreamSpecification:
        StreamViewType: NEW_AND_OLD_IMAGES
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 3bfd580f-ae76-49e1-adc0-412ec581b212
  InsertJobPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - 'dynamodb:PutItem'
            Effect: Allow
            Resource: !GetAtt 
              - JobsTable
              - Arn
        Version: 2012-10-17
      PolicyName: NewJobPolicy
      Roles:
        - !Ref CreateJobRole
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 1963b04f-2c09-4261-89e6-6cf7e9330fcc
  TargetScanRole:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 571c0a26-ee59-4ab9-9dfe-c6eb0fddbdbb
  TargetScanPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyName: TargetScanPolicy
      PolicyDocument:
        Version: 2012-10-17
        Statement:
          - Action:
              - 'dynamodb:PutItem'
              - 'dynamodb:BatchWriteItem'
              - 'dynamodb:Query'
            Effect: Allow
            Resource: !GetAtt 
              - TargetsTable
              - Arn
          - Action:
              - 'dynamodb:DescribeStream'
              - 'dynamodb:GetRecords'
              - 'dynamodb:GetShardIterator'
              - 'dynamodb:ListStreams'
            Effect: Allow
            Resource: !Sub >-
              arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:table/${JobsTable}/stream/*
            Sid: Stmt5747548
      Roles:
        - !Ref TargetScanRole
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 9a137981-a570-41e7-bba0-3d05f58520a1
  TargetsTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      AttributeDefinitions:
        - AttributeName: JobID
          AttributeType: S
        - AttributeName: TargetID
          AttributeType: 'N'
      KeySchema:
        - AttributeName: JobID
          KeyType: HASH
        - AttributeName: TargetID
          KeyType: RANGE
      BillingMode: PAY_PER_REQUEST
      StreamSpecification:
        StreamViewType: NEW_AND_OLD_IMAGES
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 94ad6aee-7723-4408-a41d-1620a280cf3b
  TargetScanFunction:
    Type: 'AWS::Lambda::Function'
    Properties:
      Code: ../modules/targetScan/lambda_function.py
      Description: Identify potential targets in the input
      Handler: lambda_function.lambda_handler
      MemorySize: 512
      Timeout: 30
      Role: !GetAtt 
        - TargetScanRole
        - Arn
      Runtime: python3.8
      Environment:
        Variables:
          STACK_NAME: !Ref 'AWS::StackName'
          TARGETS_TABLE: !Ref TargetsTable
    Metadata:
      'AWS::CloudFormation::Designer':
        id: ddfc2f07-2c3e-42c1-90b7-73771be6a243
  TargetScanEventSourceMapping:
    Type: 'AWS::Lambda::EventSourceMapping'
    Properties:
      EventSourceArn: !GetAtt 
        - JobsTable
        - StreamArn
      FunctionName: !GetAtt 
        - TargetScanFunction
        - Arn
      StartingPosition: TRIM_HORIZON
    DependsOn:
      - TargetScanPolicy
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 1cf9d574-dd2f-401c-afe0-fd12bc830245
  ConsensusFunction:
    Type: 'AWS::Lambda::Function'
    Properties:
      Code: ../modules/consensus/lambda_function.py
      Description: Evaluate guide efficiency using consensus approach
      Handler: lambda_function.lambda_handler
      MemorySize: 512
      Timeout: 30
      Role: !GetAtt 
        - ConsensusRole
        - Arn
      Runtime: python3.8
      Environment:
        Variables:
          TARGETS_TABLE: !Ref TargetsTable
      Layers:
        - !Ref ConsensusPython38PkgsLayer
        - !Ref Sgrnascorer2ModelLayer
        - !Ref RnaFoldLayer
        - !Ref SharedObjectsLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 7418d3b1-5f2c-41ab-bbde-90ed5851e136
  ConsensusRole:
    Type: 'AWS::IAM::Role'
    Properties:
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 0a474368-1a81-4e15-99c3-58bad70cb460
  IsslFunction:
    Type: 'AWS::Lambda::Function'
    Properties:
      Code: ../modules/issl/lambda_function.py
      Description: Evaluate guide specificity using ISSL
      Handler: lambda_function.lambda_handler
      MemorySize: 512
      Timeout: 30
      Role: !GetAtt 
        - IsslRole
        - Arn
      Runtime: python3.8
      Environment:
        Variables:
          TARGETS_TABLE: !Ref TargetsTable
          JOBS_TABLE: !Ref JobsTable
      Layers:
        - !Ref IsslScoreOfftargetsLayer
        - !Ref IsslIndexesLayer
        - !Ref SharedObjectsLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: b25105be-158e-4fc3-8e00-f656951de458
  IsslRole:
    Type: 'AWS::IAM::Role'
    Properties:
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 20780a16-27db-4134-8405-a329ce705b1b
  UpdateTargetPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyName: UpdateTargetPolicy
      PolicyDocument:
        Statement:
          - Action:
              - 'dynamodb:UpdateItem'
            Effect: Allow
            Resource: !GetAtt 
              - TargetsTable
              - Arn
          - Action:
              - 'dynamodb:GetRecords'
              - 'dynamodb:GetItem'
              - 'dynamodb:BatchGetItem'
              - 'dynamodb:Query'
            Effect: Allow
            Resource: !GetAtt 
              - JobsTable
              - Arn
        Version: 2012-10-17
      Roles:
        - !Ref ConsensusRole
        - !Ref IsslRole
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 79eb6c99-bb5a-4037-8020-dac91ee146b3
  IsslScoreOfftargetsLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/isslScoreOfftargets
      Description: ISSL off-target scoring binary
      LayerName: IsslScoreOfftargetsLayer
      LicenseInfo: 'See https://github.com/bmds-lab/Crackling'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 846e4476-0853-42d6-9cf8-b416ba475340
  IsslIndexesLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/isslIndexes/.
      Description: ISSL indexes
      LayerName: IsslIndexesLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 15e9975f-854d-428a-8025-1b70fd8a0e01
  ConsensusPython38PkgsLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/consensusPy38Pkgs/.
      Description: Python3.8 packages for consensus Lambda function
      LayerName: ConsensusPython38PkgsLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 67e81dd7-fcd5-4c2f-b58a-f82677d632b4
  Sgrnascorer2ModelLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/sgrnascorer2Model
      Description: The sgRnaScorer2 model
      LayerName: Sgrnascorer2ModelLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 95084832-b17e-499d-a6b6-af3a55aeb9f2
  RnaFoldLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/rnaFold
      Description: The Vienna RnaFold binary
      LayerName: RnaFoldLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 2b2450aa-e5ef-48c8-b449-af0592b493c5
  SharedObjectsLayer:
    Type: 'AWS::Serverless::LayerVersion'
    Properties:
      CompatibleRuntimes:
        - python3.8
      ContentUri: ../layers/lib
      Description: Libraries for compiled binaries
      LayerName: SharedObjectsLayer
    Metadata:
      'AWS::CloudFormation::Designer':
        id: acc4716f-e9c9-40f5-86b8-abea8cb5cba2
  DdbFanEventSourceMapping:
    Type: 'AWS::Lambda::EventSourceMapping'
    Properties:
      EventSourceArn: !GetAtt 
        - TargetsTable
        - StreamArn
      FunctionName: !GetAtt 
        - DdbFanFunction
        - Arn
      StartingPosition: TRIM_HORIZON
    DependsOn:
      - DdbFanPolicy
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 654b6ca8-6bea-4939-ad6e-dcb6d2c40788
  DdbFanFunction:
    Type: 'AWS::Lambda::Function'
    Properties:
      Code: ../modules/ddbFan/lambda_function.py
      Description: Fan-out batch jobs from targets table
      Handler: lambda_function.lambda_handler
      MemorySize: 512
      Timeout: 30
      Role: !GetAtt 
        - DdbFanRole
        - Arn
      Runtime: python3.8
      Environment:
        Variables:
          STACK_NAME: !Ref 'AWS::StackName'
          TARGETS_TABLE: !Ref TargetsTable
          ISSL_LAMBDA: !Ref IsslFunction
          CONSENSUS_LAMBDA: !Ref ConsensusFunction
    Metadata:
      'AWS::CloudFormation::Designer':
        id: e87ee461-48b2-46de-93d2-b5c3b9cc2326
  DdbFanRole:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action:
              - 'sts:AssumeRole'
            Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
        Version: 2012-10-17
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'
    Metadata:
      'AWS::CloudFormation::Designer':
        id: eb3850ab-ccdc-43a2-9579-47dd134bd7a4
  DdbFanPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyName: DdbFanPolicy
      PolicyDocument:
        Version: 2012-10-17
        Statement:
          - Action:
              - 'dynamodb:PutItem'
              - 'dynamodb:BatchWriteItem'
              - 'dynamodb:Query'
            Effect: Allow
            Resource: !GetAtt 
              - TargetsTable
              - Arn
          - Action:
              - 'lambda:InvokeFunction'
            Effect: Allow
            Resource: !GetAtt 
              - IsslFunction
              - Arn
          - Action:
              - 'lambda:InvokeFunction'
            Effect: Allow
            Resource: !GetAtt 
              - ConsensusFunction
              - Arn
          - Action:
              - 'dynamodb:DescribeStream'
              - 'dynamodb:GetRecords'
              - 'dynamodb:GetShardIterator'
              - 'dynamodb:ListStreams'
            Effect: Allow
            Resource: !Sub >-
              arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:table/${TargetsTable}/stream/*
            Sid: Stmt5747548
      Roles:
        - !Ref DdbFanRole
    Metadata:
      'AWS::CloudFormation::Designer':
        id: 2c45ec3a-c22a-4742-b149-3dafc3959fd0
Metadata:
  'AWS::CloudFormation::Designer':
    1ccb6ce5-114b-40aa-86e0-bab2d9469bb7:
      size:
        width: 60
        height: 60
      position:
        x: 330
        'y': 630
      z: 1
      embeds: []
    063f37b4-895f-468a-806c-cf4c038b7881:
      size:
        width: 60
        height: 60
      position:
        x: 450
        'y': 630
      z: 1
      embeds: []
      isassociatedwith:
        - 1ccb6ce5-114b-40aa-86e0-bab2d9469bb7
    cec9eb71-520d-4c8e-b49d-6707666e37c7:
      size:
        width: 660
        height: 490
      position:
        x: 60
        'y': 110
      z: 1
      embeds:
        - 9180788b-6adb-40b4-b61a-cc508edc5b79
        - 56e501fd-f9d6-44c0-a54b-6eac7891ed90
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
        - 1237aee6-1763-4764-8e61-cff47a07a281
    1237aee6-1763-4764-8e61-cff47a07a281:
      size:
        width: 150
        height: 160
      position:
        x: 80
        'y': 160
      z: 2
      parent: cec9eb71-520d-4c8e-b49d-6707666e37c7
      embeds:
        - 20c69c84-7828-4853-8398-b77a31dbe46b
      iscontainedinside:
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
    20c69c84-7828-4853-8398-b77a31dbe46b:
      size:
        width: 60
        height: 60
      position:
        x: 110
        'y': 220
      z: 3
      parent: 1237aee6-1763-4764-8e61-cff47a07a281
      embeds: []
      iscontainedinside:
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - 1237aee6-1763-4764-8e61-cff47a07a281
        - 1237aee6-1763-4764-8e61-cff47a07a281
      dependson:
        - 8a5ba4db-dc88-4861-87f4-c2ef066286aa
    8a5ba4db-dc88-4861-87f4-c2ef066286aa:
      size:
        width: 60
        height: 60
      position:
        x: -40
        'y': 190
      z: 1
      embeds: []
      iscontainedinside:
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
      dependson:
        - 20c69c84-7828-4853-8398-b77a31dbe46b
        - b21304cf-1263-43b2-be51-06b8451b8758
    bfb8ab7d-a828-4dae-9daf-c8d3fc91fcd2:
      size:
        width: 60
        height: 60
      position:
        x: 120
        'y': 900
      z: 1
      embeds: []
    7e5fdb7c-849e-477b-bd32-203183c47ca5:
      size:
        width: 60
        height: 60
      position:
        x: 120
        'y': 780
      z: 1
      embeds: []
    80b5073f-fd00-42d8-a12d-e61d272405b9:
      size:
        width: 60
        height: 60
      position:
        x: 30
        'y': 780
      z: 1
      embeds: []
      isassociatedwith:
        - 7e5fdb7c-849e-477b-bd32-203183c47ca5
    fa21bebf-4f0a-46de-b488-ed609ec4515c:
      size:
        width: 60
        height: 60
      position:
        x: -40
        'y': 320
      z: 1
      embeds: []
      isassociatedwith:
        - 8a5ba4db-dc88-4861-87f4-c2ef066286aa
      iscontainedinside:
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
    7264d5d4-f58a-4769-bde3-7796cdfa22e5:
      size:
        width: 60
        height: 60
      position:
        x: 60
        'y': 630
      z: 1
      embeds: []
    c32a628e-a0c5-4464-936c-e55983f5dfea:
      size:
        width: 60
        height: 60
      position:
        x: 210
        'y': 630
      z: 1
      embeds: []
    3bfd580f-ae76-49e1-adc0-412ec581b212:
      size:
        width: 60
        height: 60
      position:
        x: 240
        'y': 780
      z: 1
      embeds: []
    1963b04f-2c09-4261-89e6-6cf7e9330fcc:
      size:
        width: 60
        height: 60
      position:
        x: 240
        'y': 900
      z: 1
      embeds: []
      isassociatedwith:
        - bfb8ab7d-a828-4dae-9daf-c8d3fc91fcd2
    94ad6aee-7723-4408-a41d-1620a280cf3b:
      size:
        width: 60
        height: 60
      position:
        x: 810
        'y': 930
      z: 1
      embeds: []
    571c0a26-ee59-4ab9-9dfe-c6eb0fddbdbb:
      size:
        width: 60
        height: 60
      position:
        x: 810
        'y': 690
      z: 1
      embeds: []
    ddfc2f07-2c3e-42c1-90b7-73771be6a243:
      size:
        width: 60
        height: 60
      position:
        x: 810
        'y': 780
      z: 1
      embeds: []
    9a137981-a570-41e7-bba0-3d05f58520a1:
      size:
        width: 60
        height: 60
      position:
        x: 720
        'y': 690
      z: 1
      embeds: []
      isassociatedwith:
        - 571c0a26-ee59-4ab9-9dfe-c6eb0fddbdbb
    1cf9d574-dd2f-401c-afe0-fd12bc830245:
      size:
        width: 60
        height: 60
      position:
        x: 330
        'y': 780
      z: 1
      embeds: []
      dependson:
        - 9a137981-a570-41e7-bba0-3d05f58520a1
    0a474368-1a81-4e15-99c3-58bad70cb460:
      size:
        width: 60
        height: 60
      position:
        x: 960
        'y': 1560
      z: 1
      embeds: []
    7418d3b1-5f2c-41ab-bbde-90ed5851e136:
      size:
        width: 60
        height: 60
      position:
        x: 960
        'y': 1140
      z: 1
      embeds: []
    20780a16-27db-4134-8405-a329ce705b1b:
      size:
        width: 60
        height: 60
      position:
        x: 630
        'y': 1560
      z: 1
      embeds: []
    b25105be-158e-4fc3-8e00-f656951de458:
      size:
        width: 60
        height: 60
      position:
        x: 630
        'y': 1140
      z: 1
      embeds: []
    79eb6c99-bb5a-4037-8020-dac91ee146b3:
      size:
        width: 60
        height: 60
      position:
        x: 810
        'y': 1560
      z: 1
      embeds: []
      isassociatedwith:
        - 0a474368-1a81-4e15-99c3-58bad70cb460
        - 20780a16-27db-4134-8405-a329ce705b1b
    95084832-b17e-499d-a6b6-af3a55aeb9f2:
      size:
        width: 60
        height: 60
      position:
        x: 870
        'y': 1230
      z: 1
      embeds: []
    67e81dd7-fcd5-4c2f-b58a-f82677d632b4:
      size:
        width: 60
        height: 60
      position:
        x: 870
        'y': 1410
      z: 1
      embeds: []
    846e4476-0853-42d6-9cf8-b416ba475340:
      size:
        width: 60
        height: 60
      position:
        x: 720
        'y': 1230
      z: 1
      embeds: []
    2b2450aa-e5ef-48c8-b449-af0592b493c5:
      size:
        width: 60
        height: 60
      position:
        x: 870
        'y': 1320
      z: 1
      embeds: []
    acc4716f-e9c9-40f5-86b8-abea8cb5cba2:
      size:
        width: 60
        height: 60
      position:
        x: 750
        'y': 1140
      z: 1
      embeds: []
    15e9975f-854d-428a-8025-1b70fd8a0e01:
      size:
        width: 60
        height: 60
      position:
        x: 720
        'y': 1320
      z: 1
      embeds: []
    eb3850ab-ccdc-43a2-9579-47dd134bd7a4:
      size:
        width: 60
        height: 60
      position:
        x: 1290
        'y': 1050
      z: 1
      embeds: []
    e87ee461-48b2-46de-93d2-b5c3b9cc2326:
      size:
        width: 60
        height: 60
      position:
        x: 1140
        'y': 1050
      z: 1
      embeds: []
    654b6ca8-6bea-4939-ad6e-dcb6d2c40788:
      size:
        width: 60
        height: 60
      position:
        x: 1140
        'y': 930
      z: 1
      embeds: []
      dependson:
        - 9a137981-a570-41e7-bba0-3d05f58520a1
        - 2c45ec3a-c22a-4742-b149-3dafc3959fd0
    2c45ec3a-c22a-4742-b149-3dafc3959fd0:
      size:
        width: 60
        height: 60
      position:
        x: 1140
        'y': 840
      z: 1
      embeds: []
      isassociatedwith:
        - eb3850ab-ccdc-43a2-9579-47dd134bd7a4
    9180788b-6adb-40b4-b61a-cc508edc5b79:
      size:
        width: 140
        height: 140
      position:
        x: 480
        'y': 370
      z: 2
      parent: cec9eb71-520d-4c8e-b49d-6707666e37c7
      embeds: []
      iscontainedinside:
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
    56e501fd-f9d6-44c0-a54b-6eac7891ed90:
      size:
        width: 160
        height: 110
      position:
        x: 290
        'y': 370
      z: 2
      parent: cec9eb71-520d-4c8e-b49d-6707666e37c7
      embeds: []
      iscontainedinside:
        - 9180788b-6adb-40b4-b61a-cc508edc5b79
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - 9180788b-6adb-40b4-b61a-cc508edc5b79
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
    c7a2ad45-bfee-4e6b-a5a5-127f4da82125:
      size:
        width: 160
        height: 160
      position:
        x: 290
        'y': 160
      z: 2
      parent: cec9eb71-520d-4c8e-b49d-6707666e37c7
      embeds:
        - b21304cf-1263-43b2-be51-06b8451b8758
      iscontainedinside:
        - 56e501fd-f9d6-44c0-a54b-6eac7891ed90
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - 56e501fd-f9d6-44c0-a54b-6eac7891ed90
        - 56e501fd-f9d6-44c0-a54b-6eac7891ed90
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
    b21304cf-1263-43b2-be51-06b8451b8758:
      size:
        width: 60
        height: 60
      position:
        x: 340
        'y': 210
      z: 3
      parent: c7a2ad45-bfee-4e6b-a5a5-127f4da82125
      embeds: []
      iscontainedinside:
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
        - cec9eb71-520d-4c8e-b49d-6707666e37c7
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
        - c7a2ad45-bfee-4e6b-a5a5-127f4da82125
